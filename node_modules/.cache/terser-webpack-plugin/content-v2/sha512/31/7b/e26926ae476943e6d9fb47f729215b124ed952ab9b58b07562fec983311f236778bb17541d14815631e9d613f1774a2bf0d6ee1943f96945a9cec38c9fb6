{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{449:function(a,t,r){a.exports=r.p+\"assets/img/1-2022-01-279.10.31.538fa626.png\"},450:function(a,t,r){a.exports=r.p+\"assets/img/2-2022-01-279.10.39.b533b022.png\"},451:function(a,t,r){a.exports=r.p+\"assets/img/3-UntitledDiagram.drawio.5f30be0a.png\"},534:function(a,t,r){\"use strict\";r.r(t);var s=r(25),_=Object(s.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":a.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"frontmatter-title\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#frontmatter-title\"}},[a._v(\"#\")]),a._v(\" \"+a._s(a.$frontmatter.title))]),a._v(\" \"),s(\"div\",{staticClass:\"custom-block tip\"},[s(\"p\",{staticClass:\"custom-block-title\"},[a._v(\"챌린지\")]),a._v(\" \"),s(\"p\",[a._v(a._s(a.$frontmatter.description))])]),a._v(\" \"),s(\"h2\",{attrs:{id:\"_0-아이디어\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0-아이디어\"}},[a._v(\"#\")]),a._v(\" 0. 아이디어\")]),a._v(\" \"),s(\"ol\",[s(\"li\",[a._v(\"협력업체는 Teleport라는 프로그램을 이용하여 파일들을 전달해준다.\")]),a._v(\" \"),s(\"li\",[a._v(\"Teleport는 jar로 되어있다.\\n\"),s(\"ol\",[s(\"li\",[a._v(\"Lambda를 이용하여 jar를 돌리기\")]),a._v(\" \"),s(\"li\",[a._v(\"Batch/ECS를 이용하여 jar를 돌리기\\n\"),s(\"ol\",[s(\"li\",[a._v(\"Docker를 이용\")])])])])])]),a._v(\" \"),s(\"h2\",{attrs:{id:\"_1-lambda를-이용하여-jar-돌리기-불가\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-lambda를-이용하여-jar-돌리기-불가\"}},[a._v(\"#\")]),a._v(\" 1. Lambda를 이용하여 jar 돌리기 —> 불가\")]),a._v(\" \"),s(\"p\",[a._v(\"최초 아이디어는 Lambda를 이용한 것이었으나, AWS Lambda는 임시 저장소의 크기가 512MB 밖에 되지 않는다.\")]),a._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:r(449),alt:\"스크린샷 2022-01-27 오전 9.10.31.png\"}})]),a._v(\" \"),s(\"p\",[a._v(\"협력업체에서 받아올 때 하나의 단위인, order ID 대로 받아온다는 가정하에 최소 Order Size가 512MB보다 훨씬 크기 때문에 Lambda를 이용하는 것은 불가능 할 것이다.\")]),a._v(\" \"),s(\"p\",[a._v(\"하지만 Lambda를 이용하는 방법을 강구하자면...\")]),a._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:r(450),alt:\"스크린샷 2022-01-27 오전 9.10.39.png\"}})]),a._v(\" \"),s(\"p\",[a._v(\"Order ID내 세부 단위로 들어가서 개별 파일들을 받아올 수도 있다.\")]),a._v(\" \"),s(\"h3\",{attrs:{id:\"어려움\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#어려움\"}},[a._v(\"#\")]),a._v(\" 어려움\")]),a._v(\" \"),s(\"p\",[a._v(\"그렇지만 이런 방법을 실제 서비스를 도입했을 때,\")]),a._v(\" \"),s(\"p\",[a._v(\"(1) 아직은 예상하기 어렵지만, 개별 파일이 512MB를 넘길 가능성이 있음\")]),a._v(\" \"),s(\"p\",[a._v(\"(2) 개체수가 많아지면 관리하기 어려워짐\")]),a._v(\" \"),s(\"ul\",[s(\"li\",[a._v(\"오류가 발생했을 때 CloudWatch Logs 등을 이용하여 역추적하기가 매우 어려울 것\")])]),a._v(\" \"),s(\"p\",[a._v(\"등의 어려움이 있다.\")]),a._v(\" \"),s(\"h2\",{attrs:{id:\"_2-aws-batch-fargate-등-컨테이너를-이용하여-jar-돌리기\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-aws-batch-fargate-등-컨테이너를-이용하여-jar-돌리기\"}},[a._v(\"#\")]),a._v(\" 2. AWS Batch(Fargate) 등 컨테이너를 이용하여 jar 돌리기\")]),a._v(\" \"),s(\"p\",[a._v(\"EC2, Fargate를 선택하여 docker를 돌릴 수 있다.\")]),a._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:r(451),alt:\"Untitled Diagram.drawio.png\"}})]),a._v(\" \"),s(\"h3\",{attrs:{id:\"고려해야하는-점\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#고려해야하는-점\"}},[a._v(\"#\")]),a._v(\" 고려해야하는 점\")]),a._v(\" \"),s(\"ul\",[s(\"li\",[a._v(\"Docker 작업\")]),a._v(\" \"),s(\"li\",[a._v(\"데이터 볼륨 확인\\n\"),s(\"ul\",[s(\"li\",[a._v(\"지금은 TEST 데이터만(2개의 Order ID) 전달받은 상황이지만, 전체를 공유 받았을 때 \"),s(\"strong\",[a._v(\"어떤 주기로 어떤 크기만큼 받아올지\")]),a._v(\" 결정해야 데이터 볼륨을 미리 정할 수 있다.\\n\"),s(\"ul\",[s(\"li\",[a._v(\"EFS\\n\"),s(\"ul\",[s(\"li\",[a._v(\"파일을 추가하고 제거할 때마다 스토리지 용량이 탄력적으로 자동 확장, 축소 됨. 영구 스토리지로서 사용 가능\")])])]),a._v(\" \"),s(\"li\",[a._v(\"Fargate 기본 임시 스토리지\\n\"),s(\"ul\",[s(\"li\",[a._v(\"21GiB - 200GiB 까지 사용 가능하며, 컨테이너가 종료되면 해당 데이터도 날아가게 됨 → 이 경우 S3까지 옮기는 작업을 완벽하게 마무리 해야함.\")])])])])])])])]),a._v(\" \"),s(\"h3\",{attrs:{id:\"요금\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#요금\"}},[a._v(\"#\")]),a._v(\" 요금\")]),a._v(\" \"),s(\"h3\",{attrs:{id:\"fargate\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#fargate\"}},[a._v(\"#\")]),a._v(\" Fargate\")]),a._v(\" \"),s(\"ul\",[s(\"li\",[a._v(\"별도의 선결제 금액 없이 컨테이너의 CPU, Memory 사용량에 기반하여 초 단위로 요금이 과금 됨. (Docker로 이미지 풀링을 시작하는 시점부터 해당 작업이 종료될 때까지)\")])]),a._v(\" \"),s(\"h3\",{attrs:{id:\"ec2\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ec2\"}},[a._v(\"#\")]),a._v(\" EC2\")]),a._v(\" \"),s(\"ul\",[s(\"li\",[a._v(\"RI는 사용이 불가능하며, Spot 으로 사용 가능. (온디맨드 대비 최대 70% 절약 가능) — 다만 Spot 인스턴스는 언제든 종료될 수 있으므로 실제 서비스에서 사용하는 것은 위험 부담이 있음.\")])]),a._v(\" \"),s(\"h3\",{attrs:{id:\"efs\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#efs\"}},[a._v(\"#\")]),a._v(\" EFS\")]),a._v(\" \"),s(\"ul\",[s(\"li\",[a._v(\"서울 리전 기준 0.09 USD/GB\")])]),a._v(\" \"),s(\"h3\",{attrs:{id:\"data-sync\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#data-sync\"}},[a._v(\"#\")]),a._v(\" Data Sync\")]),a._v(\" \"),s(\"ul\",[s(\"li\",[a._v(\"EFS → S3 파일 전송 (요금이 발생하기 때문에 굳이 이를 이용하지 않고 S3 API 를 이용해서 옮기는게 비용효율적으로 생각됨.)\")]),a._v(\" \"),s(\"li\",[a._v(\"0.0125 USD/GB\")])]),a._v(\" \"),s(\"h3\",{attrs:{id:\"요청-해야하는-권한-개인-계정에서-fulladmin-권한으로-진행해서-정확하지-않을-수-있음\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#요청-해야하는-권한-개인-계정에서-fulladmin-권한으로-진행해서-정확하지-않을-수-있음\"}},[a._v(\"#\")]),a._v(\" 요청 해야하는 권한 — 개인 계정에서 FullAdmin 권한으로 진행해서 정확하지 않을 수 있음\")]),a._v(\" \"),s(\"ul\",[s(\"li\",[a._v(\"Batch 작업에 필요한 권한\\n\"),s(\"ul\",[s(\"li\",[a._v(\"AWSBatchServiceRole\")])])]),a._v(\" \"),s(\"li\",[a._v(\"EFS 생성/읽기/목록 작업에 필요한 정책 등\")])]),a._v(\" \"),s(\"p\",[a._v(\"후일담\\n: 이 파이프라인을 진행하면서 사실상 Role/Policy 와의 전쟁이었음\")])])}),[],!1,null,null,null);t.default=_.exports}}]);","extractedComments":[]}