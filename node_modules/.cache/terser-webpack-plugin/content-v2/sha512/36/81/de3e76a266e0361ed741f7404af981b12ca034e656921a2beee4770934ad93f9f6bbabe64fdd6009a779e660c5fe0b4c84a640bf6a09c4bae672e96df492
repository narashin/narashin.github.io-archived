{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{416:function(e,t,a){e.exports=a.p+\"assets/img/IMG_0342.4a524422.png\"},490:function(e,t,a){\"use strict\";a.r(t);var s=a(25),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"특정-브라우저에서만-접속이-되지-않거나-간헐적으로-되는-현상\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#특정-브라우저에서만-접속이-되지-않거나-간헐적으로-되는-현상\"}},[e._v(\"#\")]),e._v(\" 특정 브라우저에서만 접속이 되지 않거나, 간헐적으로 되는 현상\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"포스트모텀-post-mortem\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#포스트모텀-post-mortem\"}},[e._v(\"#\")]),e._v(\" 포스트모텀(Post-mortem)\")]),e._v(\" \"),s(\"p\",[e._v(\"특정 브라우저에서 서비스 도메인에 제대로 이용할 수 없다. 보통은 접속되지 않다가, 간헐적으로 접속되는 경우도 있다.\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"개요-overview\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#개요-overview\"}},[e._v(\"#\")]),e._v(\" 개요(Overview)\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v(\"특정 브라우저에서 서비스 도메인으로 접속하였을 때, 브라우저가 에러로 표시된다.\")]),e._v(\" \"),s(\"li\",[e._v(\"모든 브라우저에서 동일한 문제가 발생하는 것은 아니다.\")]),e._v(\" \"),s(\"li\",[e._v(\"접속이 안되던 브라우저에서도 간헐적으로 되는 경우도 있다.\")])]),e._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:a(416),alt:\"~@img/apache-server-error/IMG_0342.png\"}})]),e._v(\" \"),s(\"h2\",{attrs:{id:\"시간-분석-timeline\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#시간-분석-timeline\"}},[e._v(\"#\")]),e._v(\" 시간 분석(Timeline)\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[s(\"p\",[s(\"code\",[e._v(\"2019-02-13 19:00\")]),e._v(\" : 고객사 WAF 설치 진행이 진행되는 와중에 구성을 변경하면서 상황을 인지함\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v(\"모바일 브라우저에서 동작을 확인한 결과 위와 같은 에러화면에 표시됨\")])])]),e._v(\" \"),s(\"li\",[s(\"p\",[s(\"code\",[e._v(\"19:10\")]),e._v(\" : 모바일 브라우저에서 세부 내역을 확인할 수 없어서, \"),s(\"strong\",[e._v(\"curl\")]),e._v(\" 을 통해서 로그를 확인함\")]),e._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[e._v(\"$ \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"curl\")]),e._v(\" 도메인 -v\\n\")])])]),s(\"ul\",[s(\"li\",[s(\"p\",[e._v(\"→ 확인 결과 HTTP/2 스트림이 비정상적으로 닫히는 현상을 발견\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[e._v(\"* Using HTTP2, server supports multi-use\\n* Connection state changed (HTTP/2 confirmed)\\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\\n* Using Stream ID: 1 (easy handle 0x7fbc66806c00)\\n> GET / HTTP/2\\n> Host: 도메인\\n> User-Agent: curl/7.54.0\\n> Accept: */*\\n>\\n* Connection state changed (MAX_CONCURRENT_STREAMS updated)!\\n* http2 error: Invalid HTTP header field was received: frame type: 1, stream: 1, name: [upgrade], value: [h2,h2c]\\n* HTTP/2 stream 1 was not closed cleanly: PROTOCOL_ERROR (err 1)\\n* Closing connection 0\\n* TLSv1.2 (OUT), TLS alert, Client hello (1):\\ncurl: (92) HTTP/2 stream 1 was not closed cleanly: PROTOCOL_ERROR (err 1)\\n\")])])])]),e._v(\" \"),s(\"li\",[s(\"p\",[e._v(\"→ 간헐적이긴 하지만 서비스 동작이 되는 경우도 있음\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[e._v(\"* Using HTTP2, server supports multi-use\\n* Connection state changed (HTTP/2 confirmed)\\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\\n* Using Stream ID: 1 (easy handle 0x7fa646006c00)\\n> GET / HTTP/2\\n> Host: exraya.com\\n> User-Agent: curl/7.54.0\\n> Accept: */*\\n>\\n* Connection state changed (MAX_CONCURRENT_STREAMS updated)!\\n< HTTP/2 200\\n< date: Wed, 13 Feb 2019 08:11:58 GMT\\n< content-type: text/html; charset=UTF-8\\n< server: Apache/2.4.34 () OpenSSL/1.0.2k-fips\\n< expires: Thu, 19 Nov 1981 08:52:00 GMT\\n< cache-control: no-store, no-cache, must-revalidate\\n< pragma: no-cache\\n< set-cookie: PHPSESSID=n3om2gvcfpjrq36ure4u6ipcf9; path=/\\n\")])])])]),e._v(\" \"),s(\"li\",[s(\"p\",[e._v(\"클라이언트 요청 시의 HTTP Protocol 버전을 \"),s(\"code\",[e._v(\"HTTP/1.1\")]),e._v(\"로 강제하였을 시에는 이런 현상이 발견되지 않는다.\")]),e._v(\" \"),s(\"div\",{staticClass:\"language- extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[e._v(\"$ curl https://도메인 --http1.1 -v\\n*   Trying 54.169.150.245...\\n* TCP_NODELAY set\\n* Connected to 도메인 () port 443 (#0)\\n* ALPN, offering http/1.1\\n* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:@STRENGTH\\n\")])])]),s(\"ul\",[s(\"li\",[e._v(\"위의 \"),s(\"code\",[e._v(\"ALPN\")]),e._v(\" 에서 클라이언트가 사용 가능한 프로토콜 버전을 \"),s(\"code\",[e._v(\"http/1.1\")]),e._v(\" 로 한정해서 질의하도록 하였다.\")])])])])]),e._v(\" \"),s(\"li\",[s(\"p\",[s(\"code\",[e._v(\"2019-02-13 10:30\")]),e._v(\" : 웹 서버에 접속하여 상태를 확인\")])]),e._v(\" \"),s(\"li\",[s(\"p\",[e._v(\"이후 고객사 웹 서버의 설정 변경을 권고함\")])])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"응급-조치-immediate-action\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#응급-조치-immediate-action\"}},[e._v(\"#\")]),e._v(\" 응급 조치(Immediate Action)\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[s(\"code\",[e._v(\"mod_http2\")]),e._v(\" 등의 http2 설정을 웹 서버에서 비활성화함\")]),e._v(\" \"),s(\"li\",[e._v(\"애플리케이션은 HTTP/2 의 특성을 활용하도록 구성되어 있지 않음\")])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"근본-원인-분석-root-cause-analysis\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#근본-원인-분석-root-cause-analysis\"}},[e._v(\"#\")]),e._v(\" 근본 원인 분석(Root Cause Analysis)\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v(\"특정 브라우저에서 HTTP/2 응답 표준에 맞지 않을 경우에 에러를 표시하고 있음\")]),e._v(\" \"),s(\"li\",[e._v(\"고객사의 웹 서버에서 HTTP/2 와 관련된 잘못된 설정을 하였음\")])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"_5why-분석-5why-analysis\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5why-분석-5why-analysis\"}},[e._v(\"#\")]),e._v(\" 5Why 분석(5Why Analysis)\")]),e._v(\" \"),s(\"hr\"),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v(\"HTTP/2 동작에 대한 인식 부족\")]),e._v(\" \"),s(\"li\",[s(\"ul\",[s(\"li\")])]),e._v(\" \"),s(\"li\",[s(\"ul\",[s(\"li\")])]),e._v(\" \"),s(\"li\",[s(\"ul\",[s(\"li\")])])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"논의-discussion\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#논의-discussion\"}},[e._v(\"#\")]),e._v(\" 논의(Discussion)\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v(\"해당 내용을 바탕으로 수정 권고를 함\")])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"예방책-preventative-measures\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#예방책-preventative-measures\"}},[e._v(\"#\")]),e._v(\" 예방책(Preventative Measures)\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[e._v(\"PHP + Apache를 사용하고 있는 고객들을 대상으로 환기해야 함\")])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"모니터링-monitoring\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#모니터링-monitoring\"}},[e._v(\"#\")]),e._v(\" 모니터링(Monitoring)\")]),e._v(\" \"),s(\"ul\",[s(\"li\",[s(\"ul\",[s(\"li\")])])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"참고\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#참고\"}},[e._v(\"#\")]),e._v(\" 참고\")])])}),[],!1,null,null,null);t.default=r.exports}}]);","extractedComments":[]}