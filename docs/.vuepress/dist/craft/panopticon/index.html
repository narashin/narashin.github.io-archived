<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Panopticon | Today Nara Learned</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="CloudTrailì„ ì´ìš©í•œ Security Group ìˆ˜ì • ì•Œë¦¼ Slackìœ¼ë¡œ ìˆ˜ì‹ í•˜ê¸°">
    
    <link rel="preload" href="/assets/css/0.styles.b1e54e08.css" as="style"><link rel="preload" href="/assets/js/app.25629556.js" as="script"><link rel="preload" href="/assets/js/2.67681264.js" as="script"><link rel="preload" href="/assets/js/5.b203fdbd.js" as="script"><link rel="prefetch" href="/assets/js/10.f1fad961.js"><link rel="prefetch" href="/assets/js/11.22838277.js"><link rel="prefetch" href="/assets/js/12.c28911d2.js"><link rel="prefetch" href="/assets/js/13.0d61a5aa.js"><link rel="prefetch" href="/assets/js/14.d0447c18.js"><link rel="prefetch" href="/assets/js/15.3822b5b4.js"><link rel="prefetch" href="/assets/js/16.aaffa1a7.js"><link rel="prefetch" href="/assets/js/17.375b50d6.js"><link rel="prefetch" href="/assets/js/18.506d78f1.js"><link rel="prefetch" href="/assets/js/19.eeb2cccf.js"><link rel="prefetch" href="/assets/js/20.0c9a36ca.js"><link rel="prefetch" href="/assets/js/21.599a4817.js"><link rel="prefetch" href="/assets/js/22.cb46a2c8.js"><link rel="prefetch" href="/assets/js/23.30cc8a14.js"><link rel="prefetch" href="/assets/js/24.cdff2d04.js"><link rel="prefetch" href="/assets/js/25.fe17fd96.js"><link rel="prefetch" href="/assets/js/26.508c4f0f.js"><link rel="prefetch" href="/assets/js/27.780734a2.js"><link rel="prefetch" href="/assets/js/28.6e3202a4.js"><link rel="prefetch" href="/assets/js/29.9efaadd6.js"><link rel="prefetch" href="/assets/js/3.06b62db8.js"><link rel="prefetch" href="/assets/js/30.5f875fee.js"><link rel="prefetch" href="/assets/js/31.5b47f016.js"><link rel="prefetch" href="/assets/js/32.e83f5330.js"><link rel="prefetch" href="/assets/js/33.68757d35.js"><link rel="prefetch" href="/assets/js/34.2d74ad35.js"><link rel="prefetch" href="/assets/js/35.b16ac83f.js"><link rel="prefetch" href="/assets/js/36.8ad966fe.js"><link rel="prefetch" href="/assets/js/37.8635439c.js"><link rel="prefetch" href="/assets/js/38.dd82e606.js"><link rel="prefetch" href="/assets/js/39.15ba2ec8.js"><link rel="prefetch" href="/assets/js/4.36216d37.js"><link rel="prefetch" href="/assets/js/40.af7afb67.js"><link rel="prefetch" href="/assets/js/41.55031bf7.js"><link rel="prefetch" href="/assets/js/42.5d29bd73.js"><link rel="prefetch" href="/assets/js/43.baf7b240.js"><link rel="prefetch" href="/assets/js/44.88b20d83.js"><link rel="prefetch" href="/assets/js/45.80d47405.js"><link rel="prefetch" href="/assets/js/46.7de8f923.js"><link rel="prefetch" href="/assets/js/47.0bea5b8d.js"><link rel="prefetch" href="/assets/js/48.b9d6b5f1.js"><link rel="prefetch" href="/assets/js/49.73e7989b.js"><link rel="prefetch" href="/assets/js/50.629ceb04.js"><link rel="prefetch" href="/assets/js/51.d182bafc.js"><link rel="prefetch" href="/assets/js/52.ca10d69c.js"><link rel="prefetch" href="/assets/js/53.cadc43c8.js"><link rel="prefetch" href="/assets/js/54.7ab917dd.js"><link rel="prefetch" href="/assets/js/55.9925a216.js"><link rel="prefetch" href="/assets/js/56.5e8c3d0c.js"><link rel="prefetch" href="/assets/js/57.77eb7906.js"><link rel="prefetch" href="/assets/js/58.a9d957ae.js"><link rel="prefetch" href="/assets/js/59.990387fe.js"><link rel="prefetch" href="/assets/js/6.59d42a87.js"><link rel="prefetch" href="/assets/js/60.c993735c.js"><link rel="prefetch" href="/assets/js/61.c7cf378c.js"><link rel="prefetch" href="/assets/js/62.67ef4e93.js"><link rel="prefetch" href="/assets/js/63.4627cafa.js"><link rel="prefetch" href="/assets/js/64.c020e37e.js"><link rel="prefetch" href="/assets/js/7.7cf6c19b.js"><link rel="prefetch" href="/assets/js/8.9e0a905f.js"><link rel="prefetch" href="/assets/js/9.77004c6f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b1e54e08.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Today Nara Learned</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/note/" class="nav-link">
  Note
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TIL" class="dropdown-title"><span class="title">TIL</span> <span class="arrow down"></span></button> <button type="button" aria-label="TIL" class="mobile-dropdown-title"><span class="title">TIL</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/til/aws/" class="nav-link">
  AWS
</a></li><li class="dropdown-item"><!----> <a href="/til/cs/" class="nav-link">
  CS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Code craft" class="dropdown-title"><span class="title">Craft</span> <span class="arrow down"></span></button> <button type="button" aria-label="Code craft" class="mobile-dropdown-title"><span class="title">Craft</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/craft/efish/" class="nav-link">
  Efish
</a></li><li class="dropdown-item"><!----> <a href="/craft/shieldee/" class="nav-link">
  Shieldee
</a></li><li class="dropdown-item"><!----> <a href="/craft/panopticon/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Panopticon
</a></li><li class="dropdown-item"><!----> <a href="/craft/aws-pricechecker/" class="nav-link">
  AWS Pricechecker
</a></li><li class="dropdown-item"><!----> <a href="/craft/ri-watcher/" class="nav-link">
  AWS RI-Watcher
</a></li><li class="dropdown-item"><!----> <a href="/craft/ssm-watcher/" class="nav-link">
  AWS SSM-Watcher
</a></li><li class="dropdown-item"><!----> <a href="/craft/worklight/" class="nav-link">
  Worklight
</a></li><li class="dropdown-item"><!----> <a href="/craft/cheakbbang/" class="nav-link">
  Cheakbbang
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/note/" class="nav-link">
  Note
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="TIL" class="dropdown-title"><span class="title">TIL</span> <span class="arrow down"></span></button> <button type="button" aria-label="TIL" class="mobile-dropdown-title"><span class="title">TIL</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/til/aws/" class="nav-link">
  AWS
</a></li><li class="dropdown-item"><!----> <a href="/til/cs/" class="nav-link">
  CS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Code craft" class="dropdown-title"><span class="title">Craft</span> <span class="arrow down"></span></button> <button type="button" aria-label="Code craft" class="mobile-dropdown-title"><span class="title">Craft</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/craft/efish/" class="nav-link">
  Efish
</a></li><li class="dropdown-item"><!----> <a href="/craft/shieldee/" class="nav-link">
  Shieldee
</a></li><li class="dropdown-item"><!----> <a href="/craft/panopticon/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Panopticon
</a></li><li class="dropdown-item"><!----> <a href="/craft/aws-pricechecker/" class="nav-link">
  AWS Pricechecker
</a></li><li class="dropdown-item"><!----> <a href="/craft/ri-watcher/" class="nav-link">
  AWS RI-Watcher
</a></li><li class="dropdown-item"><!----> <a href="/craft/ssm-watcher/" class="nav-link">
  AWS SSM-Watcher
</a></li><li class="dropdown-item"><!----> <a href="/craft/worklight/" class="nav-link">
  Worklight
</a></li><li class="dropdown-item"><!----> <a href="/craft/cheakbbang/" class="nav-link">
  Cheakbbang
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Panopticon</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/craft/panopticon/#_0-á„‰á…µá„‚á…¡á„…á…µá„‹á…©" class="sidebar-link">0. ì‹œë‚˜ë¦¬ì˜¤</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/craft/panopticon/#_1-cloudtrail-á„‰á…¥á†¯á„Œá…¥á†¼á„’á…¡á„€á…µ" class="sidebar-link">1. CloudTrail ì„¤ì •í•˜ê¸°</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/craft/panopticon/#_0-á„á…®á„Œá…¥á†¨-á„‰á…©á†¨á„‰á…¥á†¼-á„‰á…¥á†«á„á…¢á†¨" class="sidebar-link">(0) ì¶”ì  ì†ì„± ì„ íƒ</a></li><li class="sidebar-sub-header"><a href="/craft/panopticon/#_1-á„…á…©á„€á…³-á„‹á…µá„‡á…¦á†«á„á…³-á„‰á…¥á†«á„á…¢á†¨" class="sidebar-link">(1) ë¡œê·¸ ì´ë²¤íŠ¸ ì„ íƒ</a></li></ul></li><li><a href="/craft/panopticon/#_2-serverless-framwork-á„…á…©-á„Œá…¡á†¨á„‰á…¥á†¼á„’á…¡á†«-á„á…©á„ƒá…³-á„‰á…¡á„‹á…­á†¼á„’á…¡á„€á…µ" class="sidebar-link">2. serverless-framwork ë¡œ ì‘ì„±í•œ ì½”ë“œ ì‚¬ìš©í•˜ê¸°</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/craft/panopticon/#_1-panopticon-á„‡á…¡á†®á„€á…µ" class="sidebar-link">(1) Panopticon ë°›ê¸°</a></li><li class="sidebar-sub-header"><a href="/craft/panopticon/#_2-serverless-á„‰á…¥á†¯á„á…µ" class="sidebar-link">(2) serverless ì„¤ì¹˜</a></li><li class="sidebar-sub-header"><a href="/craft/panopticon/#_3-deploy-á„Œá…¥á†«-á„’á…ªá†«á„€á…§á†¼á„‡á…§á†«á„‰á…®-á„‰á…¥á†¯á„Œá…¥á†¼á„’á…¡á„€á…µ" class="sidebar-link">(3) deploy ì „ í™˜ê²½ë³€ìˆ˜ ì„¤ì •í•˜ê¸°</a></li><li class="sidebar-sub-header"><a href="/craft/panopticon/#_4-sls-deploy-á„’á…¡á„€á…µ" class="sidebar-link">(4) sls deploy í•˜ê¸°</a></li></ul></li><li><a href="/craft/panopticon/#_3-á„‰á…µá†¯á„Œá…¦-á„ƒá…©á†¼á„Œá…¡á†¨-á„’á…ªá„†á…§á†«" class="sidebar-link">3. ì‹¤ì œ ë™ì‘ í™”ë©´</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/craft/panopticon/#_1-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…¢á†¼á„‰á…¥á†¼" class="sidebar-link">(1) ë³´ì•ˆê·¸ë£¹ ìƒì„±</a></li><li class="sidebar-sub-header"><a href="/craft/panopticon/#_2-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…¡á†¨á„Œá…¦" class="sidebar-link">(2) ë³´ì•ˆê·¸ë£¹ ì‚­ì œ</a></li><li class="sidebar-sub-header"><a href="/craft/panopticon/#_3-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…®á„Œá…¥á†¼" class="sidebar-link">(3) ë³´ì•ˆê·¸ë£¹ ìˆ˜ì •</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="frontmatter-title"><a href="#frontmatter-title" class="header-anchor">#</a> Panopticon</h1> <div class="custom-block tip"><p class="custom-block-title">ëª©í‘œ</p> <p>CloudTrailì„ ì´ìš©í•œ Security Group ìˆ˜ì • ì•Œë¦¼ Slackìœ¼ë¡œ ìˆ˜ì‹ í•˜ê¸°</p></div> <h2 id="_0-á„‰á…µá„‚á…¡á„…á…µá„‹á…©"><a href="#_0-á„‰á…µá„‚á…¡á„…á…µá„‹á…©" class="header-anchor">#</a> 0. ì‹œë‚˜ë¦¬ì˜¤</h2> <p>AWS ë³´ì•ˆê·¸ë£¹ì´ ìˆ˜ì •, ìƒì„±, ì‚­ì œ ëì„ ë•Œ ì•Œë¦¼ì„ ë°›ê³  ì‹¶ë‹¤.</p> <ol><li>CloudTrail ì„ ì´ìš©í•˜ì—¬ Write ëœ ë‚´ì—­ì„ ì¶”ì í•œë‹¤.</li> <li>CloudWatch Event ë¥¼ í†µí•´ 1 ì¤‘, íŠ¹ì • ì´ë²¤íŠ¸(EC2 Security Group í¸ì§‘)ê°€ ë°œìƒí–ˆì„ ë•Œ Lambdaë¥¼ í˜¸ì¶œí•˜ê²Œ í•œë‹¤.</li> <li>Lambdaì— Slack ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆê²Œ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.</li> <li>ì´ ëª¨ë“  ê³¼ì •ì— í•„ìš”í•œ IAM Role, CloudWatch Event, Lambda ë“±ì„ ë”°ë¡œ ì‘ì„±í•˜ì§€ ì•Šê³  Serverless Framwork ë¥¼ ì´ìš©í•˜ì—¬ Wrapping ëœ íŒŒì¼ì„ ì´ìš©í•œë‹¤.</li></ol> <h2 id="_1-cloudtrail-á„‰á…¥á†¯á„Œá…¥á†¼á„’á…¡á„€á…µ"><a href="#_1-cloudtrail-á„‰á…¥á†¯á„Œá…¥á†¼á„’á…¡á„€á…µ" class="header-anchor">#</a> 1. CloudTrail ì„¤ì •í•˜ê¸°</h2> <p><img src="/assets/img/2020-07-20__11.53.50.50d2861f.png" alt="2020-07-20__11.53.50.png"></p> <ol><li>CloudTrail â†’ ì¶”ì  ìƒì„±</li></ol> <h3 id="_0-á„á…®á„Œá…¥á†¨-á„‰á…©á†¨á„‰á…¥á†¼-á„‰á…¥á†«á„á…¢á†¨"><a href="#_0-á„á…®á„Œá…¥á†¨-á„‰á…©á†¨á„‰á…¥á†¼-á„‰á…¥á†«á„á…¢á†¨" class="header-anchor">#</a> (0) ì¶”ì  ì†ì„± ì„ íƒ</h3> <p><img src="/assets/img/2020-07-20__11.57.31.cfee7235.png" alt="2020-07-20__11.57.31.png"></p> <ul><li>ì¶”ì  ì´ë¦„ ì§€ì •</li> <li>ìŠ¤í† ë¦¬ì§€ ìœ„ì¹˜ ì§€ì • - ìƒˆ S3 ë²„í‚·ì— ìƒì„±í•´ë„ ë˜ê³ , ê¸°ì¡´ ë²„í‚·ì„ ì´ìš©í•´ë„ OK</li></ul> <p><img src="/assets/img/2020-07-20__11.57.37.0bb21700.png" alt="2020-07-20__11.57.37.png"></p> <ul><li>KMSë¥¼ ì‚¬ìš©í•œë‹¤ë©´ KMS í‚¤ ì„¤ì •</li></ul> <p><img src="/assets/img/2020-07-20__11.59.15.1bf5917a.png" alt="2020-07-20__11.59.15.png"></p> <ul><li>Logë¥¼ ë‚¨ê¸°ê² ìŠµë‹ˆë‹¤.</li> <li>IAM ì—­í• ì„ ì§€ì •
<ul><li>ìƒˆë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ë©´ <code>&gt; ì •ì±…ë¬¸ì„œ</code> ë¥¼ í´ë¦­í•˜ì—¬ ë‚˜ì˜¤ëŠ” JSONì„ ì°¸ê³ í•˜ì—¬ ìƒì„±</li></ul></li> <li><code>ë‹¤ìŒ</code></li></ul> <h3 id="_1-á„…á…©á„€á…³-á„‹á…µá„‡á…¦á†«á„á…³-á„‰á…¥á†«á„á…¢á†¨"><a href="#_1-á„…á…©á„€á…³-á„‹á…µá„‡á…¦á†«á„á…³-á„‰á…¥á†«á„á…¢á†¨" class="header-anchor">#</a> (1) ë¡œê·¸ ì´ë²¤íŠ¸ ì„ íƒ</h3> <p><img src="/assets/img/2020-07-20__12.59.21.e3c197c8.png" alt="2020-07-20__12.59.21.png"></p> <ul><li>ìˆ˜ì •ëœ ëª©ë¡ë§Œ ë°›ì•„ ë³¼ ì˜ˆì •ì´ê¸° ë•Œë¬¸ì— API í™œë™ â†’ ì“°ê¸° ì—ë§Œ ì²´í¬ í•©ë‹ˆë‹¤.</li> <li><code>ë‹¤ìŒ</code> <ul><li>ê²€í†  ë° ìƒì„±</li></ul></li></ul> <p><img src="/assets/img/2020-07-20__1.08.19.5a1a0631.png" alt="2020-07-20__1.08.19.png"></p> <h2 id="_2-serverless-framwork-á„…á…©-á„Œá…¡á†¨á„‰á…¥á†¼á„’á…¡á†«-á„á…©á„ƒá…³-á„‰á…¡á„‹á…­á†¼á„’á…¡á„€á…µ"><a href="#_2-serverless-framwork-á„…á…©-á„Œá…¡á†¨á„‰á…¥á†¼á„’á…¡á†«-á„á…©á„ƒá…³-á„‰á…¡á„‹á…­á†¼á„’á…¡á„€á…µ" class="header-anchor">#</a> 2. serverless-framwork ë¡œ ì‘ì„±í•œ ì½”ë“œ ì‚¬ìš©í•˜ê¸°</h2> <h3 id="_1-panopticon-á„‡á…¡á†®á„€á…µ"><a href="#_1-panopticon-á„‡á…¡á†®á„€á…µ" class="header-anchor">#</a> (1) Panopticon ë°›ê¸°</h3> <p><a href="https://github.com/narashin/AWS-CloudTrail-Panopticon" target="_blank" rel="noopener noreferrer">narashin/AWS-CloudTrail-Panopticon<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ğŸ”¼Panopticon ë°›ê¸°</p> <h3 id="_2-serverless-á„‰á…¥á†¯á„á…µ"><a href="#_2-serverless-á„‰á…¥á†¯á„á…µ" class="header-anchor">#</a> (2) serverless ì„¤ì¹˜</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> i -g serverless
</code></pre></div><h3 id="_3-deploy-á„Œá…¥á†«-á„’á…ªá†«á„€á…§á†¼á„‡á…§á†«á„‰á…®-á„‰á…¥á†¯á„Œá…¥á†¼á„’á…¡á„€á…µ"><a href="#_3-deploy-á„Œá…¥á†«-á„’á…ªá†«á„€á…§á†¼á„‡á…§á†«á„‰á…®-á„‰á…¥á†¯á„Œá…¥á†¼á„’á…¡á„€á…µ" class="header-anchor">#</a> (3) deploy ì „ í™˜ê²½ë³€ìˆ˜ ì„¤ì •í•˜ê¸°</h3> <ul><li><code>serverless.yml</code> ìƒì„±</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>service<span class="token operator">:</span> cloudwatch<span class="token operator">-</span>ec2<span class="token operator">-</span>sg

provider<span class="token operator">:</span>
  name<span class="token operator">:</span> aws
  runtime<span class="token operator">:</span> nodejs12<span class="token punctuation">.</span>x
  stage<span class="token operator">:</span> dev
  region<span class="token operator">:</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Region</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  iamRoleStatements:
    - Effect: &quot;Allow&quot;
      Action:
        - &quot;ec2:DescribeSecurityGroups&quot;
      Resource: &quot;*&quot;
  environment: 
    SLACK_URL: &quot;&lt;ë³´ë‚¼ ì±„ë„ì˜ WEBHOOK_URL&gt;&quot;

functions:
  panopticon:
    handler: handler.panopticon
    events:
      - cloudwatchEvent:
          event:
            source:
              - &quot;aws.ec2&quot;
            detail-type:
              - &quot;AWS API Call via CloudTrail&quot;
            detail:
                eventSource:
                    - &quot;ec2.amazonaws.com&quot;
                eventName:
                    - &quot;CreateSecurityGroup&quot;
                    - &quot;DeleteSecurityGroup&quot;
                    - &quot;RevokeSecurityGroupIngress&quot;
                    - &quot;RevokeSecurityGroupEgress&quot;
                    - &quot;AuthorizesecuritygroupIngress&quot;
                    - &quot;AuthorizesecuritygroupEgress&quot;
</span></code></pre></div><ul><li>Nodejs12.x</li> <li>iamRole : <code>&quot;ec2:DescribeSecurityGroups&quot;</code> í—ˆìš©</li> <li>CloudwatchEvent On
<ul><li>EC2 Event Source ë“¤
<ul><li>&quot;CreateSecurityGroup&quot;</li> <li>&quot;DeleteSecurityGroup&quot;</li> <li>&quot;RevokeSecurityGroupIngress&quot;</li> <li>&quot;RevokeSecurityGroupEgress&quot;</li> <li>&quot;AuthorizesecuritygroupIngress&quot;</li> <li>&quot;AuthorizesecuritygroupEgress&quot;</li></ul></li></ul></li></ul> <h3 id="_4-sls-deploy-á„’á…¡á„€á…µ"><a href="#_4-sls-deploy-á„’á…¡á„€á…µ" class="header-anchor">#</a> (4) <code>sls deploy</code> í•˜ê¸°</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ sls deploy
</code></pre></div><ul><li>ë¨¼ì € í”„ë¡œê·¸ë˜ë° ë°©ì‹ì˜ IAM AWS Access Key, Secret Keyë¡œ aws configureê°€ ì‘ì„± ë˜ì–´ìˆì–´ì•¼ í•¨.
<ul><li><code>aws configure</code> ë¡œ í™•ì¸.</li></ul></li> <li>Serverless ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨.</li> <li>Slack Webhook URLì´ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•¨.</li></ul> <h2 id="_3-á„‰á…µá†¯á„Œá…¦-á„ƒá…©á†¼á„Œá…¡á†¨-á„’á…ªá„†á…§á†«"><a href="#_3-á„‰á…µá†¯á„Œá…¦-á„ƒá…©á†¼á„Œá…¡á†¨-á„’á…ªá„†á…§á†«" class="header-anchor">#</a> 3. ì‹¤ì œ ë™ì‘ í™”ë©´</h2> <h3 id="_1-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…¢á†¼á„‰á…¥á†¼"><a href="#_1-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…¢á†¼á„‰á…¥á†¼" class="header-anchor">#</a> (1) ë³´ì•ˆê·¸ë£¹ ìƒì„±</h3> <p><img src="/assets/img/2020-07-20__1.43.36.1d55a5a8.png" alt="2020-07-20__1.43.36.png"></p> <h3 id="_2-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…¡á†¨á„Œá…¦"><a href="#_2-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…¡á†¨á„Œá…¦" class="header-anchor">#</a> (2) ë³´ì•ˆê·¸ë£¹ ì‚­ì œ</h3> <p><img src="/assets/img/2020-07-20__1.42.49.232b4815.png" alt="2020-07-20__1.42.49.png"></p> <h3 id="_3-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…®á„Œá…¥á†¼"><a href="#_3-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…®á„Œá…¥á†¼" class="header-anchor">#</a> (3) ë³´ì•ˆê·¸ë£¹ ìˆ˜ì •</h3> <p><img src="/assets/img/2020-07-20__1.43.51.b1a819fc.png" alt="2020-07-20__1.43.51.png"></p> <ul><li>ë³´ì•ˆê·¸ë£¹ ìƒì„¸ ì¶”ê°€ ìˆ˜ì •</li></ul> <p><img src="/assets/img/2020-07-20__1.43.24.69c06d5c.png" alt="2020-07-20__1.43.24.png"></p> <ul><li>ë³´ì•ˆê·¸ë£¹ ìƒì„¸ ì‚­ì œ</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.25629556.js" defer></script><script src="/assets/js/2.67681264.js" defer></script><script src="/assets/js/5.b203fdbd.js" defer></script>
  </body>
</html>
