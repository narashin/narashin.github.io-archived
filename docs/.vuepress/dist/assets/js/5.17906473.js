(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{365:function(t,s,a){t.exports=a.p+"assets/img/2020-07-20__11.53.50.50d2861f.png"},366:function(t,s,a){t.exports=a.p+"assets/img/2020-07-20__11.57.31.cfee7235.png"},367:function(t,s,a){t.exports=a.p+"assets/img/2020-07-20__11.57.37.0bb21700.png"},368:function(t,s,a){t.exports=a.p+"assets/img/2020-07-20__11.59.15.1bf5917a.png"},369:function(t,s,a){t.exports=a.p+"assets/img/2020-07-20__12.59.21.e3c197c8.png"},370:function(t,s,a){t.exports=a.p+"assets/img/2020-07-20__1.08.19.5a1a0631.png"},371:function(t,s,a){t.exports=a.p+"assets/img/2020-07-20__1.43.36.1d55a5a8.png"},372:function(t,s,a){t.exports=a.p+"assets/img/2020-07-20__1.42.49.232b4815.png"},373:function(t,s,a){t.exports=a.p+"assets/img/2020-07-20__1.43.51.b1a819fc.png"},374:function(t,s,a){t.exports=a.p+"assets/img/2020-07-20__1.43.24.69c06d5c.png"},493:function(t,s,a){"use strict";a.r(s);var e=a(25),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"frontmatter-title"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[t._v("#")]),t._v(" "+t._s(t.$frontmatter.title))]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("ëª©í‘œ")]),t._v(" "),e("p",[t._v(t._s(t.$frontmatter.description))])]),t._v(" "),e("h2",{attrs:{id:"_0-á„‰á…µá„‚á…¡á„…á…µá„‹á…©"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_0-á„‰á…µá„‚á…¡á„…á…µá„‹á…©"}},[t._v("#")]),t._v(" 0. ì‹œë‚˜ë¦¬ì˜¤")]),t._v(" "),e("p",[t._v("AWS ë³´ì•ˆê·¸ë£¹ì´ ìˆ˜ì •, ìƒì„±, ì‚­ì œ ëì„ ë•Œ ì•Œë¦¼ì„ ë°›ê³  ì‹¶ë‹¤.")]),t._v(" "),e("ol",[e("li",[t._v("CloudTrail ì„ ì´ìš©í•˜ì—¬ Write ëœ ë‚´ì—­ì„ ì¶”ì í•œë‹¤.")]),t._v(" "),e("li",[t._v("CloudWatch Event ë¥¼ í†µí•´ 1 ì¤‘, íŠ¹ì • ì´ë²¤íŠ¸(EC2 Security Group í¸ì§‘)ê°€ ë°œìƒí–ˆì„ ë•Œ Lambdaë¥¼ í˜¸ì¶œí•˜ê²Œ í•œë‹¤.")]),t._v(" "),e("li",[t._v("Lambdaì— Slack ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆê²Œ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.")]),t._v(" "),e("li",[t._v("ì´ ëª¨ë“  ê³¼ì •ì— í•„ìš”í•œ IAM Role, CloudWatch Event, Lambda ë“±ì„ ë”°ë¡œ ì‘ì„±í•˜ì§€ ì•Šê³  Serverless Framwork ë¥¼ ì´ìš©í•˜ì—¬ Wrapping ëœ íŒŒì¼ì„ ì´ìš©í•œë‹¤.")])]),t._v(" "),e("h2",{attrs:{id:"_1-cloudtrail-á„‰á…¥á†¯á„Œá…¥á†¼á„’á…¡á„€á…µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-cloudtrail-á„‰á…¥á†¯á„Œá…¥á†¼á„’á…¡á„€á…µ"}},[t._v("#")]),t._v(" 1. CloudTrail ì„¤ì •í•˜ê¸°")]),t._v(" "),e("p",[e("img",{attrs:{src:a(365),alt:"2020-07-20__11.53.50.png"}})]),t._v(" "),e("ol",[e("li",[t._v("CloudTrail â†’ ì¶”ì  ìƒì„±")])]),t._v(" "),e("h3",{attrs:{id:"_0-á„á…®á„Œá…¥á†¨-á„‰á…©á†¨á„‰á…¥á†¼-á„‰á…¥á†«á„á…¢á†¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_0-á„á…®á„Œá…¥á†¨-á„‰á…©á†¨á„‰á…¥á†¼-á„‰á…¥á†«á„á…¢á†¨"}},[t._v("#")]),t._v(" (0) ì¶”ì  ì†ì„± ì„ íƒ")]),t._v(" "),e("p",[e("img",{attrs:{src:a(366),alt:"2020-07-20__11.57.31.png"}})]),t._v(" "),e("ul",[e("li",[t._v("ì¶”ì  ì´ë¦„ ì§€ì •")]),t._v(" "),e("li",[t._v("ìŠ¤í† ë¦¬ì§€ ìœ„ì¹˜ ì§€ì • - ìƒˆ S3 ë²„í‚·ì— ìƒì„±í•´ë„ ë˜ê³ , ê¸°ì¡´ ë²„í‚·ì„ ì´ìš©í•´ë„ OK")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(367),alt:"2020-07-20__11.57.37.png"}})]),t._v(" "),e("ul",[e("li",[t._v("KMSë¥¼ ì‚¬ìš©í•œë‹¤ë©´ KMS í‚¤ ì„¤ì •")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(368),alt:"2020-07-20__11.59.15.png"}})]),t._v(" "),e("ul",[e("li",[t._v("Logë¥¼ ë‚¨ê¸°ê² ìŠµë‹ˆë‹¤.")]),t._v(" "),e("li",[t._v("IAM ì—­í• ì„ ì§€ì •\n"),e("ul",[e("li",[t._v("ìƒˆë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ë©´ "),e("code",[t._v("> ì •ì±…ë¬¸ì„œ")]),t._v(" ë¥¼ í´ë¦­í•˜ì—¬ ë‚˜ì˜¤ëŠ” JSONì„ ì°¸ê³ í•˜ì—¬ ìƒì„±")])])]),t._v(" "),e("li",[e("code",[t._v("ë‹¤ìŒ")])])]),t._v(" "),e("h3",{attrs:{id:"_1-á„…á…©á„€á…³-á„‹á…µá„‡á…¦á†«á„á…³-á„‰á…¥á†«á„á…¢á†¨"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-á„…á…©á„€á…³-á„‹á…µá„‡á…¦á†«á„á…³-á„‰á…¥á†«á„á…¢á†¨"}},[t._v("#")]),t._v(" (1) ë¡œê·¸ ì´ë²¤íŠ¸ ì„ íƒ")]),t._v(" "),e("p",[e("img",{attrs:{src:a(369),alt:"2020-07-20__12.59.21.png"}})]),t._v(" "),e("ul",[e("li",[t._v("ìˆ˜ì •ëœ ëª©ë¡ë§Œ ë°›ì•„ ë³¼ ì˜ˆì •ì´ê¸° ë•Œë¬¸ì— API í™œë™ â†’ ì“°ê¸° ì—ë§Œ ì²´í¬ í•©ë‹ˆë‹¤.")]),t._v(" "),e("li",[e("code",[t._v("ë‹¤ìŒ")]),t._v(" "),e("ul",[e("li",[t._v("ê²€í†  ë° ìƒì„±")])])])]),t._v(" "),e("p",[e("img",{attrs:{src:a(370),alt:"2020-07-20__1.08.19.png"}})]),t._v(" "),e("h2",{attrs:{id:"_2-serverless-framwork-á„…á…©-á„Œá…¡á†¨á„‰á…¥á†¼á„’á…¡á†«-á„á…©á„ƒá…³-á„‰á…¡á„‹á…­á†¼á„’á…¡á„€á…µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-serverless-framwork-á„…á…©-á„Œá…¡á†¨á„‰á…¥á†¼á„’á…¡á†«-á„á…©á„ƒá…³-á„‰á…¡á„‹á…­á†¼á„’á…¡á„€á…µ"}},[t._v("#")]),t._v(" 2. serverless-framwork ë¡œ ì‘ì„±í•œ ì½”ë“œ ì‚¬ìš©í•˜ê¸°")]),t._v(" "),e("h3",{attrs:{id:"_1-panopticon-á„‡á…¡á†®á„€á…µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-panopticon-á„‡á…¡á†®á„€á…µ"}},[t._v("#")]),t._v(" (1) Panopticon ë°›ê¸°")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/narashin/AWS-CloudTrail-Panopticon",target:"_blank",rel:"noopener noreferrer"}},[t._v("narashin/AWS-CloudTrail-Panopticon"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("ğŸ”¼Panopticon ë°›ê¸°")]),t._v(" "),e("h3",{attrs:{id:"_2-serverless-á„‰á…¥á†¯á„á…µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-serverless-á„‰á…¥á†¯á„á…µ"}},[t._v("#")]),t._v(" (2) serverless ì„¤ì¹˜")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -g serverless\n")])])]),e("h3",{attrs:{id:"_3-deploy-á„Œá…¥á†«-á„’á…ªá†«á„€á…§á†¼á„‡á…§á†«á„‰á…®-á„‰á…¥á†¯á„Œá…¥á†¼á„’á…¡á„€á…µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-deploy-á„Œá…¥á†«-á„’á…ªá†«á„€á…§á†¼á„‡á…§á†«á„‰á…®-á„‰á…¥á†¯á„Œá…¥á†¼á„’á…¡á„€á…µ"}},[t._v("#")]),t._v(" (3) deploy ì „ í™˜ê²½ë³€ìˆ˜ ì„¤ì •í•˜ê¸°")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("serverless.yml")]),t._v(" ìƒì„±")])]),t._v(" "),e("div",{staticClass:"language-jsx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-jsx"}},[e("code",[t._v("service"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" cloudwatch"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ec2"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("sg\n\nprovider"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n  name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" aws\n  runtime"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nodejs12"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("x\n  stage"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" dev\n  region"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Region")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v('\n  iamRoleStatements:\n    - Effect: "Allow"\n      Action:\n        - "ec2:DescribeSecurityGroups"\n      Resource: "*"\n  environment: \n    SLACK_URL: "<ë³´ë‚¼ ì±„ë„ì˜ WEBHOOK_URL>"\n\nfunctions:\n  panopticon:\n    handler: handler.panopticon\n    events:\n      - cloudwatchEvent:\n          event:\n            source:\n              - "aws.ec2"\n            detail-type:\n              - "AWS API Call via CloudTrail"\n            detail:\n                eventSource:\n                    - "ec2.amazonaws.com"\n                eventName:\n                    - "CreateSecurityGroup"\n                    - "DeleteSecurityGroup"\n                    - "RevokeSecurityGroupIngress"\n                    - "RevokeSecurityGroupEgress"\n                    - "AuthorizesecuritygroupIngress"\n                    - "AuthorizesecuritygroupEgress"\n')])])])]),e("ul",[e("li",[t._v("Nodejs12.x")]),t._v(" "),e("li",[t._v("iamRole : "),e("code",[t._v('"ec2:DescribeSecurityGroups"')]),t._v(" í—ˆìš©")]),t._v(" "),e("li",[t._v("CloudwatchEvent On\n"),e("ul",[e("li",[t._v("EC2 Event Source ë“¤\n"),e("ul",[e("li",[t._v('"CreateSecurityGroup"')]),t._v(" "),e("li",[t._v('"DeleteSecurityGroup"')]),t._v(" "),e("li",[t._v('"RevokeSecurityGroupIngress"')]),t._v(" "),e("li",[t._v('"RevokeSecurityGroupEgress"')]),t._v(" "),e("li",[t._v('"AuthorizesecuritygroupIngress"')]),t._v(" "),e("li",[t._v('"AuthorizesecuritygroupEgress"')])])])])])]),t._v(" "),e("h3",{attrs:{id:"_4-sls-deploy-á„’á…¡á„€á…µ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-sls-deploy-á„’á…¡á„€á…µ"}},[t._v("#")]),t._v(" (4) "),e("code",[t._v("sls deploy")]),t._v(" í•˜ê¸°")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ sls deploy\n")])])]),e("ul",[e("li",[t._v("ë¨¼ì € í”„ë¡œê·¸ë˜ë° ë°©ì‹ì˜ IAM AWS Access Key, Secret Keyë¡œ aws configureê°€ ì‘ì„± ë˜ì–´ìˆì–´ì•¼ í•¨.\n"),e("ul",[e("li",[e("code",[t._v("aws configure")]),t._v(" ë¡œ í™•ì¸.")])])]),t._v(" "),e("li",[t._v("Serverless ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨.")]),t._v(" "),e("li",[t._v("Slack Webhook URLì´ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•¨.")])]),t._v(" "),e("h2",{attrs:{id:"_3-á„‰á…µá†¯á„Œá…¦-á„ƒá…©á†¼á„Œá…¡á†¨-á„’á…ªá„†á…§á†«"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-á„‰á…µá†¯á„Œá…¦-á„ƒá…©á†¼á„Œá…¡á†¨-á„’á…ªá„†á…§á†«"}},[t._v("#")]),t._v(" 3. ì‹¤ì œ ë™ì‘ í™”ë©´")]),t._v(" "),e("h3",{attrs:{id:"_1-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…¢á†¼á„‰á…¥á†¼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…¢á†¼á„‰á…¥á†¼"}},[t._v("#")]),t._v(" (1) ë³´ì•ˆê·¸ë£¹ ìƒì„±")]),t._v(" "),e("p",[e("img",{attrs:{src:a(371),alt:"2020-07-20__1.43.36.png"}})]),t._v(" "),e("h3",{attrs:{id:"_2-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…¡á†¨á„Œá…¦"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…¡á†¨á„Œá…¦"}},[t._v("#")]),t._v(" (2) ë³´ì•ˆê·¸ë£¹ ì‚­ì œ")]),t._v(" "),e("p",[e("img",{attrs:{src:a(372),alt:"2020-07-20__1.42.49.png"}})]),t._v(" "),e("h3",{attrs:{id:"_3-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…®á„Œá…¥á†¼"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-á„‡á…©á„‹á…¡á†«á„€á…³á„…á…®á†¸-á„‰á…®á„Œá…¥á†¼"}},[t._v("#")]),t._v(" (3) ë³´ì•ˆê·¸ë£¹ ìˆ˜ì •")]),t._v(" "),e("p",[e("img",{attrs:{src:a(373),alt:"2020-07-20__1.43.51.png"}})]),t._v(" "),e("ul",[e("li",[t._v("ë³´ì•ˆê·¸ë£¹ ìƒì„¸ ì¶”ê°€ ìˆ˜ì •")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(374),alt:"2020-07-20__1.43.24.png"}})]),t._v(" "),e("ul",[e("li",[t._v("ë³´ì•ˆê·¸ë£¹ ìƒì„¸ ì‚­ì œ")])])])}),[],!1,null,null,null);s.default=r.exports}}]);